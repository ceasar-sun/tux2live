#!/bin/sh

####################################################
# Tux2live Project
#
# Name: 
#
# Description: About network: network basic config, network device
#
# Author: Ceasar Sun <ceasar_at_nchc_org_tw>
####################################################
[ -f "/etc/tux2live.conf" ] && . /etc/tux2live.conf

_description="About network: network basic config, network device ..."

# Main
if [ ! -e /etc/debian_version -a ! -e /etc/SuSE-release ]; then
# scripts run in rh-like distro
	echo "$_description"

	# delete /etc/resolv.conf
	cat > /etc/resolv.conf <<EOF
# Auto generated by tux2live mkrootfs
search localhost
nameserver 168.95.1.1

EOF

	[ -f /etc/resolv.conf ] && echo -e "search localhost\n\nnameserver 168.95.1.1" > /etc/resolv.conf
	# clean up /etc/hosts 
	[ -f /etc/hosts ] && echo "127.0.0.1	localhost	$_LIVECD_HOSTNAME" >/etc/hosts

	echo -e "HOSTNAME=$_LIVECD_HOSTNAME\nNETWORKING=yes" > /etc/sysconfig/network

	# Clean up net card recorder
	[ -f /etc/iftab ] && rm -rf /etc/iftab
	find /etc/udev -name *-persistent-net.rules -exec rm -rf {} \;
	find /etc/udev -name *-net_config.rules -exec rm -rf {} \;

	rm -rf /etc/sysconfig/network-scripts/ifcfg-eth*

fi
